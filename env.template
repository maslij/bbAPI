# BrinkByte Vision - tAPI Edge Service Configuration
# Copy this file to .env and customize for your deployment

# ===== Billing Service Configuration =====
BILLING_SERVICE_URL=https://billing.brinkbyte.com/api/v1
BILLING_API_KEY=your_api_key_here
BILLING_TIMEOUT_MS=5000
BILLING_MAX_RETRIES=3

# ===== Edge Device Identity =====
# Device ID will be auto-generated from hardware UUID if set to 'auto'
EDGE_DEVICE_ID=auto
TENANT_ID=your_tenant_uuid_here
MANAGEMENT_TIER=basic  # Options: basic ($50/mo), managed ($65/mo)

# ===== PostgreSQL Database =====
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DATABASE=tapi_edge
POSTGRES_USER=tapi_user
POSTGRES_PASSWORD=tapi_dev_password
POSTGRES_POOL_SIZE=10
POSTGRES_CONNECTION_TIMEOUT_MS=5000

# ===== Redis Cache =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_MAX_MEMORY_MB=256
REDIS_CONNECTION_TIMEOUT_MS=3000

# ===== License Caching Configuration =====
LICENSE_CACHE_TTL_SECONDS=3600  # 1 hour - how long to cache license validation
ENTITLEMENT_CACHE_TTL_SECONDS=300  # 5 minutes - how long to cache feature entitlements
ENABLE_OFFLINE_MODE=true  # Allow operation with cached licenses when offline

# ===== Usage Tracking Configuration =====
USAGE_BATCH_SIZE=1000  # Number of events to batch before syncing to billing service
USAGE_SYNC_INTERVAL_MINUTES=5  # How often to sync usage to billing service
TRACK_API_CALLS=true  # Track API endpoint usage
TRACK_LLM_TOKENS=true  # Track LLM token consumption (if applicable)
TRACK_STORAGE=true  # Track storage usage (GB-days)
TRACK_AGENT_EXECUTIONS=true  # Track smart agent executions
TRACK_SMS=true  # Track SMS message sends

# ===== Feature Flags =====
ENABLE_LICENSE_VALIDATION=true  # Enable license validation with billing service
ENABLE_USAGE_TRACKING=true  # Enable usage metering and reporting
ENABLE_HEARTBEAT=true  # Enable device heartbeat to billing service
HEARTBEAT_INTERVAL_MINUTES=15  # How often to send heartbeat

# ===== API Server Configuration =====
API_PORT=8080
API_THREADS=4
API_ENABLE_CORS=true

# ===== Logging Configuration =====
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARN, ERROR
LOG_TO_FILE=true
LOG_FILE_PATH=/var/log/tapi/tapi.log
LOG_MAX_FILE_SIZE_MB=100
LOG_MAX_FILES=10

# ===== Development/Debug Settings =====
DEBUG_MODE=false
MOCK_BILLING_SERVICE=false  # Use mock billing service for local development
BYPASS_LICENSE_CHECK=false  # DANGEROUS: Bypass all license checks (dev only)

